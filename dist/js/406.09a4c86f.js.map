{"version":3,"file":"js/406.09a4c86f.js","mappings":"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","sources":["webpack://control-center/./src/views/PersonalInformationView.vue","webpack://control-center/./src/composables/updateProfileImage.ts","webpack://control-center/./src/views/PersonalInformationView.vue?4e27"],"sourcesContent":["<template>\n    <ion-page>\n      <ion-header>\n        <ion-toolbar>\n          <ion-title>Persönliche Informationen</ion-title>\n        </ion-toolbar>\n      </ion-header>\n      <ion-content>\n        <ion-avatar>\n          <img v-if=\"user.profileImg != 'avater'\" :src=\"user.profileImg\" @click=\"takePhoto()\"/>\n        </ion-avatar>\n        <ion-list>\n          <ion-item>\n            <ion-label position=\"stacked\">Name</ion-label>\n            <ion-input :disabled=\"!user.firstName.editable\" :value=\"user.firstName.value\" @input=\"user.firstName.value = $event.target.value\"></ion-input>\n            <ion-button slot=\"end\" color=\"danger\" fill=\"clear\" @click=\"edit('firstName')\">\n              <ion-icon name=\"pencil\"></ion-icon>\n            </ion-button>\n          </ion-item>\n          <ion-item>\n            <ion-label position=\"stacked\">Surname</ion-label>\n            <ion-input :disabled=\"!user.lastName.editable\" :value=\"user.lastName.value\" @input=\"user.lastName.value = $event.target.value\"></ion-input>\n            <ion-button slot=\"end\" color=\"danger\" fill=\"clear\" @click=\"edit('lastName')\">\n              <ion-icon name=\"pencil\"></ion-icon>\n            </ion-button>\n          </ion-item>\n          <ion-item>\n            <ion-label position=\"stacked\">E-Mail-Adresse</ion-label>\n            <ion-input :disabled=\"!user.email.editable\" :value=\"user.email.value\" @input=\"user.email.value = $event.target.value\"></ion-input>\n            <ion-button slot=\"end\" color=\"danger\" fill=\"clear\" @click=\"edit('email')\">\n              <ion-icon name=\"pencil\"></ion-icon>\n            </ion-button>\n          </ion-item>\n          <ion-item>\n            <ion-label position=\"stacked\">Telefonnummer</ion-label>\n            <ion-input :disabled=\"!user.phone.editable\" :value=\"user.phone.value\" @input=\"user.phone.value = $event.target.value\"></ion-input>\n            <ion-button slot=\"end\" color=\"danger\" fill=\"clear\" @click=\"edit('phone')\">\n              <ion-icon name=\"pencil\"></ion-icon>\n            </ion-button>\n          </ion-item>\n          <ion-item>\n            <ion-label position=\"stacked\">Adresse</ion-label>\n            <ion-textarea :disabled=\"!user.address.editable\" :value=\"user.address.value\" @input=\"user.address.value = $event.target.value\"></ion-textarea>\n            <ion-button slot=\"end\" color=\"danger\" fill=\"clear\" @click=\"edit('address')\">\n              <ion-icon name=\"pencil\"></ion-icon>\n            </ion-button>\n          </ion-item>\n        </ion-list>\n        <ion-button expand=\"block\" color=\"danger\" @click=\"save\">Profil speichern</ion-button>\n      </ion-content>\n    </ion-page>\n  </template>\n  \n  <script>\n  import { IonPage, IonHeader, IonToolbar, IonTitle, IonContent, IonList, IonItem, IonLabel, IonInput, IonButton, IonIcon, IonTextarea, IonAvatar } from '@ionic/vue';\n  import { defineComponent } from 'vue';\n  import axios from 'axios';\n  import qs from 'qs';\n  import {usePhotoGallery, Photo} from '@/composables/updateProfileImage';\n  import {getUserData} from '@/userData'\n\n  export default defineComponent({\n    name: 'PersonalInformation',\n    components: { IonPage, IonHeader, IonToolbar, IonTitle, IonContent, IonList, IonItem, IonLabel, IonInput, IonButton, IonIcon, IonTextarea, IonAvatar },\n    data() {\n      return {\n        user: {\n          firstName: { value: '', editable: true },\n          lastName: { value: '', editable: true },\n          email: { value: '', editable: false },\n          phone: { value: '', editable: false },\n          address: { value: '', editable: true },\n        },\n      };\n    },\n    methods: {\n      edit(field) {\n        this.user[field].editable = true;\n      },\n      save() {\n        //console.log('User: ', this.user);\n\n        // Filtern der Felder, die gespeichert werden sollen\n         const filteredUser = {};\n           for (const field in this.user) {\n             if (Object.prototype.propertyIsEnumerable.call(this.user, field)) {\n              if (field !== 'id' && field !== 'editable') {\n               filteredUser[field] = this.user[field]['value'];\n              }\n             }\n           }\n  filteredUser['editData'] = \"editData\";\n  // Senden der Benutzerdaten an die API\n  axios.post('https://alex.polan.sk/control-center/user.php?' + qs.stringify(filteredUser), {\n    headers: {\n    'Content-Type': 'application/json'\n  }\n  })\n    .then(response => {\n        console.log(response);\n      console.log('API response:', response.data);\n\n    }) \n    .catch(error => {\n      console.error('API error:', error);\n    });\n\n  // Zurücksetzen der editierbaren Felder\n  for (const field in this.user) {\n    if (Object.prototype.propertyIsEnumerable.call(this.user, field)) {\n      this.user[field].editable = false;\n    }\n   \n  }\n}\n},\n    async mounted(){\n        const data = await getUserData();\n        console.log(data);\n        this.user.email.value = data.email;\n        this.user.firstName.value = data.firstName; \n        this.user.lastName.value = data.lastName;\n        this.user.profileImg = data.profileImg;\n    },\n    setup(){\n    const { takePhoto, photos } = usePhotoGallery();\n    return {\n        takePhoto, photos\n    }\n  }\n  });\n</script>\n  ","import {ref, onMounted, watch, resolveComponent} from 'vue';\nimport { Camera, CameraResultType, CameraSource, CameraPhoto } from '@capacitor/camera';\nimport { Filesystem, Directory } from '@capacitor/filesystem';\nimport { Storage } from '@capacitor/storage';\nimport axios from 'axios';\nimport qs from 'qs';\n\n\nexport interface Photo {\n    filepath: string,\n    webviewPath?: string\n}\n\nexport function usePhotoGallery(){\n    const PHOTO_STORAGE = \"photos\";\n  const photos = ref<Photo[]>([]);\n\n  const cachePhotos = () => {\n    Storage.set({\n        key: PHOTO_STORAGE,\n        value: JSON.stringify(photos.value)\n    })\n  }\n\n  watch(photos, cachePhotos);\n\n  const loadSaved = async () => {\n    const photoList = await Storage.get({ key: PHOTO_STORAGE});\n    const photosInStorage = photoList.value ? JSON.parse(photoList.value) : [];\n\n    for(const photo of photosInStorage) {\n        const file = await Filesystem.readFile({\n            path: photo.filepath,\n            directory: Directory.Data\n        });\n\n        photo.webviewPath = `data:image/jpeg;base64,${file.data}`;\n    }\n\n    photos.value = photosInStorage;\n  }\n\n  onMounted(loadSaved);\n\n    const takePhoto = async () => {\n        const cameraPhoto = await Camera.getPhoto({\n            resultType: CameraResultType.Uri,\n            source: CameraSource.Camera,\n            quality: 10//100\n        });\n        const fileName = new Date().getTime() + '.jpeg';\n        const savedFileImage = await savePicture(cameraPhoto, fileName);\n        photos.value = [savedFileImage, ...photos.value];\n\n    };\n\n    const convertBlobtoBase64 = (blob: Blob) => new Promise((resolve, reject) => {\n        const reader = new FileReader;\n        reader.onerror = reject;\n        reader.onload = () => {\n            resolve(reader.result);\n        };\n        reader.readAsDataURL(blob)\n    });\n\n    const savePicture = async (photo: CameraPhoto, fileName: string): Promise<Photo> =>{\n\n        \n\n        const response= await fetch(photo.webPath!);\n        const blob = await response.blob();\n        const base64Data = await convertBlobtoBase64(blob) as string;\n\n\n        \n        \n        const savedFile = await Filesystem.writeFile({\n            path: fileName,\n            data: base64Data,\n            directory: Directory.Data\n        });\n\n console.log(base64Data);\n const bodyFormData = new FormData();\n bodyFormData.append('name', fileName);\n bodyFormData.append('data', base64Data);\n bodyFormData.append('updateProfileImage', \"updateProfileImage\");\n\n\n\n        axios.post(\"https://alex.polan.sk/control-center/user.php\", bodyFormData,  {\n            headers: {\n                'Content-Type': 'multipart/form-data'\n            }\n          }); \n        return {\n            filepath: fileName,\n            webviewPath: photo.webPath\n        }\n\n        \n    }\n\n    return {\n        photos,\n        takePhoto \n    }\n}","import { render } from \"./PersonalInformationView.vue?vue&type=template&id=9a791b3a\"\nimport script from \"./PersonalInformationView.vue?vue&type=script&lang=js\"\nexport * from \"./PersonalInformationView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/alexpolan/control-center-2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createBlock","_component_ion_page","_createVNode","_component_ion_header","_component_ion_toolbar","_component_ion_title","_component_ion_content","_component_ion_avatar","_ctx","profileImg","_createElementBlock","src","onClick","_component_ion_list","_component_ion_item","_component_ion_label","position","_component_ion_input","disabled","firstName","editable","value","onInput","$event","target","_component_ion_button","slot","color","fill","_component_ion_icon","name","lastName","email","phone","_component_ion_textarea","address","expand","usePhotoGallery","PHOTO_STORAGE","photos","ref","cachePhotos","Storage","key","JSON","stringify","watch","loadSaved","async","photoList","photosInStorage","parse","photo","file","Filesystem","path","filepath","directory","Directory","webviewPath","data","onMounted","takePhoto","cameraPhoto","Camera","resultType","CameraResultType","source","CameraSource","quality","fileName","Date","getTime","savedFileImage","savePicture","convertBlobtoBase64","blob","Promise","resolve","reject","reader","FileReader","onerror","onload","result","readAsDataURL","response","fetch","webPath","base64Data","console","log","bodyFormData","FormData","append","axios","headers","defineComponent","components","IonPage","IonHeader","IonToolbar","IonTitle","IonContent","IonList","IonItem","IonLabel","IonInput","IonButton","IonIcon","IonTextarea","IonAvatar","user","methods","edit","field","this","save","filteredUser","Object","prototype","propertyIsEnumerable","call","qs","then","catch","error","getUserData","setup","__exports__","render"],"sourceRoot":""}