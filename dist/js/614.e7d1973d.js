"use strict";(self["webpackChunkcontrol_center"]=self["webpackChunkcontrol_center"]||[]).push([[614],{8614:(e,n,t)=>{t.r(n),t.d(n,{default:()=>v});t(4916),t(5306),t(8757);var a=t(6252),o=t(3577);const l={id:"file-drag-drop"},i={ref:"fileform"},r=(0,a._)("span",{class:"drop-files"},"Drop the files here!",-1),s=[r],d=[".value"],p={class:"remove-container"},u=["onClick"];function c(e,n,t,r,c,f){const m=(0,a.up)("ion-label"),g=(0,a.up)("ion-input"),h=(0,a.up)("ion-item"),w=(0,a.up)("ion-col"),v=(0,a.up)("ion-button"),_=(0,a.up)("ion-row"),C=(0,a.up)("ion-grid"),I=(0,a.up)("ion-content"),b=(0,a.up)("ion-page");return(0,a.wg)(),(0,a.j4)(b,null,{default:(0,a.w5)((()=>[(0,a.Wm)(I,null,{default:(0,a.w5)((()=>[(0,a.Wm)(C,null,{default:(0,a.w5)((()=>[(0,a.Wm)(_,null,{default:(0,a.w5)((()=>[(0,a.Wm)(w,{size:"12","size-lg":"8"},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{onDblclick:n[2]||(n[2]=e=>c.code=c.name.toLowerCase().replaceAll(" ","-").replaceAll("'",""))},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{position:"floating"},{default:(0,a.w5)((()=>[(0,a.Uk)("Name")])),_:1}),(0,a.Wm)(g,{type:"text",modelValue:c.name,"onUpdate:modelValue":n[0]||(n[0]=e=>c.name=e),value:c.name,onIonInput:n[1]||(n[1]=e=>{c.name=e.target.value}),placeholder:"Enter Icon Code"},null,8,["modelValue","value"])])),_:1})])),_:1}),(0,a.Wm)(w,{size:"12","size-lg":"8"},{default:(0,a.w5)((()=>[(0,a.Wm)(h,null,{default:(0,a.w5)((()=>[(0,a.Wm)(m,{position:"floating"},{default:(0,a.w5)((()=>[(0,a.Uk)("Code")])),_:1}),(0,a.Wm)(g,{modelValue:c.code,"onUpdate:modelValue":n[3]||(n[3]=e=>c.code=e),value:c.code,onIonInput:n[4]||(n[4]=e=>{c.code=e.target.value}),type:"text",placeholder:"Enter Project Name"},null,8,["modelValue","value"])])),_:1})])),_:1}),(0,a.Wm)(w,{size:"12","size-lg":"8"},{default:(0,a.w5)((()=>[(0,a._)("div",l,[(0,a._)("form",i,s,512),(0,a._)("progress",{max:"100",".value":c.uploadPercentage},null,8,d),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(c.files,((e,n)=>((0,a.wg)(),(0,a.iD)("div",{key:n,class:"file-listing"},[(0,a._)("img",{class:"preview",ref_for:!0,ref:"preview"+parseInt(n)},null,512),(0,a.Uk)(" "+(0,o.zw)(e.name)+" ",1),(0,a._)("div",p,[(0,a._)("a",{class:"remove",onClick:e=>f.removeFile(n)},"Remove",8,u)])])))),128))]),(0,a.Wm)(v,{onClick:n[5]||(n[5]=e=>f.submit())},{default:(0,a.w5)((()=>[(0,a.Uk)(" Create ")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}t(7658);var f=t(8945),m=(t(129),t(5759));const g={name:"NewProject",components:{IonItem:m.Ie,IonLabel:m.Q$,IonInput:m.pK,IonPage:m._i,IonContent:m.W2},data(){return{name:"",code:"",dragAndDropCapable:!1,files:[],uploadPercentage:0}},mounted(){this.dragAndDropCapable=this.determineDragAndDropCapable(),this.dragAndDropCapable&&(["drag","dragstart","dragend","dragover","dragenter","dragleave","drop"].forEach(function(e){this.$refs.fileform.addEventListener(e,function(e){e.preventDefault(),e.stopPropagation()}.bind(this),!1)}.bind(this)),this.$refs.fileform.addEventListener("drop",function(e){for(let n=0;n<e.dataTransfer.files.length;n++)this.files.push(e.dataTransfer.files[n]),this.getImagePreviews()}.bind(this)))},methods:{determineDragAndDropCapable(){const e=document.createElement("div");return("draggable"in e||"ondragstart"in e&&"ondrop"in e)&&"FormData"in window&&"FileReader"in window},getImagePreviews(){for(let e=0;e<this.files.length;e++)if(/\.(jpe?g|png|gif)$/i.test(this.files[e].name)){const n=new FileReader;n.addEventListener("load",function(){this.$refs["preview"+parseInt(e)][0].src=n.result}.bind(this),!1),n.readAsDataURL(this.files[e])}else this.$nextTick((function(){this.$refs["preview"+parseInt(e)][0].src="/images/file.png"}))},submit(){if(""!=this.name&&""!=this.code){const e=new FormData;for(let n=0;n<this.files.length;n++){const t=this.files[n];e.append("files["+n+"]",t)}e.append("name",this.name),e.append("code",this.code),e.append("project",this.$route.params.project),e.append("newComponent","newComponent"),f.Z.post("https://alex.polan.sk/control-center/components.php",e,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(e){this.uploadPercentage=parseInt(Math.round(100*e.loaded/e.total))}.bind(this)}).then((function(){console.log("SUCCESS!!")})).catch((function(){console.log("FAILURE!!")}))}else alert("Name or Code empty!")},removeFile(e){this.files.splice(e,1)}}};var h=t(3744);const w=(0,h.Z)(g,[["render",c]]),v=w}}]);
//# sourceMappingURL=614.e7d1973d.js.map