"use strict";(self["webpackChunkcontrol_center"]=self["webpackChunkcontrol_center"]||[]).push([[406],{2406:(e,a,t)=>{t.r(a),t.d(a,{default:()=>g});var l=t(6252);const n=["src"];function o(e,a,t,o,s,r){const u=(0,l.up)("ion-title"),i=(0,l.up)("ion-toolbar"),d=(0,l.up)("ion-header"),p=(0,l.up)("ion-avatar"),c=(0,l.up)("ion-label"),m=(0,l.up)("ion-input"),f=(0,l.up)("ion-icon"),v=(0,l.up)("ion-button"),h=(0,l.up)("ion-item"),w=(0,l.up)("ion-textarea"),b=(0,l.up)("ion-list"),g=(0,l.up)("ion-content"),k=(0,l.up)("ion-page");return(0,l.wg)(),(0,l.j4)(k,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l.Wm)(i,null,{default:(0,l.w5)((()=>[(0,l.Wm)(u,null,{default:(0,l.w5)((()=>[(0,l.Uk)("PersÃ¶nliche Informationen")])),_:1})])),_:1})])),_:1}),(0,l.Wm)(g,null,{default:(0,l.w5)((()=>[(0,l.Wm)(p,null,{default:(0,l.w5)((()=>["avater"!=e.user.profileImg?((0,l.wg)(),(0,l.iD)("img",{key:0,src:e.user.profileImg,onClick:a[0]||(a[0]=a=>e.takePhoto())},null,8,n)):(0,l.kq)("",!0)])),_:1}),(0,l.Wm)(b,null,{default:(0,l.w5)((()=>[(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c,{position:"stacked"},{default:(0,l.w5)((()=>[(0,l.Uk)("Name")])),_:1}),(0,l.Wm)(m,{disabled:!e.user.firstName.editable,value:e.user.firstName.value,onInput:a[1]||(a[1]=a=>e.user.firstName.value=a.target.value)},null,8,["disabled","value"]),(0,l.Wm)(v,{slot:"end",color:"danger",fill:"clear",onClick:a[2]||(a[2]=a=>e.edit("firstName"))},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{name:"pencil"})])),_:1})])),_:1}),(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c,{position:"stacked"},{default:(0,l.w5)((()=>[(0,l.Uk)("Surname")])),_:1}),(0,l.Wm)(m,{disabled:!e.user.lastName.editable,value:e.user.lastName.value,onInput:a[3]||(a[3]=a=>e.user.lastName.value=a.target.value)},null,8,["disabled","value"]),(0,l.Wm)(v,{slot:"end",color:"danger",fill:"clear",onClick:a[4]||(a[4]=a=>e.edit("lastName"))},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{name:"pencil"})])),_:1})])),_:1}),(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c,{position:"stacked"},{default:(0,l.w5)((()=>[(0,l.Uk)("E-Mail-Adresse")])),_:1}),(0,l.Wm)(m,{disabled:!e.user.email.editable,value:e.user.email.value,onInput:a[5]||(a[5]=a=>e.user.email.value=a.target.value)},null,8,["disabled","value"]),(0,l.Wm)(v,{slot:"end",color:"danger",fill:"clear",onClick:a[6]||(a[6]=a=>e.edit("email"))},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{name:"pencil"})])),_:1})])),_:1}),(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c,{position:"stacked"},{default:(0,l.w5)((()=>[(0,l.Uk)("Telefonnummer")])),_:1}),(0,l.Wm)(m,{disabled:!e.user.phone.editable,value:e.user.phone.value,onInput:a[7]||(a[7]=a=>e.user.phone.value=a.target.value)},null,8,["disabled","value"]),(0,l.Wm)(v,{slot:"end",color:"danger",fill:"clear",onClick:a[8]||(a[8]=a=>e.edit("phone"))},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{name:"pencil"})])),_:1})])),_:1}),(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c,{position:"stacked"},{default:(0,l.w5)((()=>[(0,l.Uk)("Adresse")])),_:1}),(0,l.Wm)(w,{disabled:!e.user.address.editable,value:e.user.address.value,onInput:a[9]||(a[9]=a=>e.user.address.value=a.target.value)},null,8,["disabled","value"]),(0,l.Wm)(v,{slot:"end",color:"danger",fill:"clear",onClick:a[10]||(a[10]=a=>e.edit("address"))},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{name:"pencil"})])),_:1})])),_:1})])),_:1}),(0,l.Wm)(v,{expand:"block",color:"danger",onClick:e.save},{default:(0,l.w5)((()=>[(0,l.Uk)("Profil speichern")])),_:1},8,["onClick"])])),_:1})])),_:1})}var s=t(5759),r=t(8945),u=t(129),i=t.n(u),d=(t(8862),t(3948),t(2262)),p=t(6826),c=t(4406),m=t(8602);function f(){const e="photos",a=(0,d.iH)([]),t=()=>{m.K.set({key:e,value:JSON.stringify(a.value)})};(0,l.YP)(a,t);const n=async()=>{const t=await m.K.get({key:e}),l=t.value?JSON.parse(t.value):[];for(const e of l){const a=await c.fy.readFile({path:e.filepath,directory:c.tP.Data});e.webviewPath=`data:image/jpeg;base64,${a.data}`}a.value=l};(0,l.bv)(n);const o=async()=>{const e=await p.V1.getPhoto({resultType:p.dk.Uri,source:p.oK.Camera,quality:10}),t=(new Date).getTime()+".jpeg",l=await u(e,t);a.value=[l,...a.value]},s=e=>new Promise(((a,t)=>{const l=new FileReader;l.onerror=t,l.onload=()=>{a(l.result)},l.readAsDataURL(e)})),u=async(e,a)=>{const t=await fetch(e.webPath),l=await t.blob(),n=await s(l);await c.fy.writeFile({path:a,data:n,directory:c.tP.Data});console.log(n);const o=new FormData;return o.append("name",a),o.append("data",n),o.append("updateProfileImage","updateProfileImage"),r.Z.post("https://alex.polan.sk/control-center/user.php",o,{headers:{"Content-Type":"multipart/form-data"}}),{filepath:a,webviewPath:e.webPath}};return{photos:a,takePhoto:o}}var v=t(8331);const h=(0,l.aZ)({name:"PersonalInformation",components:{IonPage:s._i,IonHeader:s.Gu,IonToolbar:s.sr,IonTitle:s.wd,IonContent:s.W2,IonList:s.q_,IonItem:s.Ie,IonLabel:s.Q$,IonInput:s.pK,IonButton:s.YG,IonIcon:s.gu,IonTextarea:s.g2,IonAvatar:s.BJ},data(){return{user:{firstName:{value:"",editable:!0},lastName:{value:"",editable:!0},email:{value:"",editable:!1},phone:{value:"",editable:!1},address:{value:"",editable:!0}}}},methods:{edit(e){this.user[e].editable=!0},save(){const e={};for(const a in this.user)Object.prototype.propertyIsEnumerable.call(this.user,a)&&"id"!==a&&"editable"!==a&&(e[a]=this.user[a]["value"]);e["editData"]="editData",r.Z.post("https://alex.polan.sk/control-center/user.php?"+i().stringify(e),{headers:{"Content-Type":"application/json"}}).then((e=>{console.log(e),console.log("API response:",e.data)})).catch((e=>{console.error("API error:",e)}));for(const a in this.user)Object.prototype.propertyIsEnumerable.call(this.user,a)&&(this.user[a].editable=!1)}},async mounted(){const e=await(0,v.i)();console.log(e),this.user.email.value=e.email,this.user.firstName.value=e.firstName,this.user.lastName.value=e.lastName,this.user.profileImg=e.profileImg},setup(){const{takePhoto:e,photos:a}=f();return{takePhoto:e,photos:a}}});var w=t(3744);const b=(0,w.Z)(h,[["render",o]]),g=b}}]);
//# sourceMappingURL=406-legacy.09a4c86f.js.map