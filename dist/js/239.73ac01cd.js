"use strict";(self["webpackChunkcontrol_center"]=self["webpackChunkcontrol_center"]||[]).push([[239],{9239:(e,a,t)=>{t.r(a),t.d(a,{default:()=>g});var l=t(6252);const o=["src"];function n(e,a,t,n,s,i){const r=(0,l.up)("ion-col"),u=(0,l.up)("ion-icon"),d=(0,l.up)("ion-avatar"),m=(0,l.up)("ion-label"),p=(0,l.up)("ion-input"),c=(0,l.up)("ion-button"),f=(0,l.up)("ion-item"),v=(0,l.up)("ion-textarea"),w=(0,l.up)("ion-list"),h=(0,l.up)("ion-row"),b=(0,l.up)("ion-grid"),g=(0,l.up)("ion-content"),W=(0,l.up)("ion-page");return(0,l.wg)(),(0,l.j4)(W,null,{default:(0,l.w5)((()=>[(0,l.Wm)(g,null,{default:(0,l.w5)((()=>[(0,l.Wm)(b,null,{default:(0,l.w5)((()=>[(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(r,{size:"1"}),(0,l.Wm)(r,{size:"10",style:{display:"flex","align-items":"center","flex-direction":"column"}},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{onClick:a[0]||(a[0]=a=>e.takePhoto())},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{style:{display:"none"},name:"camera-outline"}),"avater"!=e.user.profileImg?((0,l.wg)(),(0,l.iD)("img",{key:0,src:e.user.profileImg},null,8,o)):(0,l.kq)("",!0)])),_:1}),(0,l.Wm)(w,{style:{width:"100%"}},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{style:{display:"flex","margin-bottom":"0.5rem !important"}},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{style:{width:"50%"}},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{position:"stacked"},{default:(0,l.w5)((()=>[(0,l.Uk)("Name")])),_:1}),(0,l.Wm)(p,{disabled:!e.user.firstName.editable,value:e.user.firstName.value,onInput:a[1]||(a[1]=a=>e.user.firstName.value=a.target.value)},null,8,["disabled","value"]),(0,l.Wm)(c,{slot:"end",color:"danger",fill:"clear",onClick:a[2]||(a[2]=a=>e.edit("firstName"))},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{name:"pencil"})])),_:1})])),_:1}),(0,l.Wm)(f,{style:{width:"50%"}},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{position:"stacked"},{default:(0,l.w5)((()=>[(0,l.Uk)("Surname")])),_:1}),(0,l.Wm)(p,{disabled:!e.user.lastName.editable,value:e.user.lastName.value,onInput:a[3]||(a[3]=a=>e.user.lastName.value=a.target.value)},null,8,["disabled","value"]),(0,l.Wm)(c,{slot:"end",color:"danger",fill:"clear",onClick:a[4]||(a[4]=a=>e.edit("lastName"))},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{name:"pencil"})])),_:1})])),_:1})])),_:1}),(0,l.Wm)(f,{style:{"margin-bottom":"0.5rem !important"}},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{position:"stacked"},{default:(0,l.w5)((()=>[(0,l.Uk)("E-Mail-Adresse")])),_:1}),(0,l.Wm)(p,{disabled:!e.user.email.editable,value:e.user.email.value,onInput:a[5]||(a[5]=a=>e.user.email.value=a.target.value)},null,8,["disabled","value"]),(0,l.Wm)(c,{slot:"end",color:"danger",fill:"clear",onClick:a[6]||(a[6]=a=>e.edit("email"))},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{name:"pencil"})])),_:1})])),_:1}),(0,l.Wm)(f,{style:{"margin-bottom":"0.5rem !important"}},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{position:"stacked"},{default:(0,l.w5)((()=>[(0,l.Uk)("Telefonnummer")])),_:1}),(0,l.Wm)(p,{disabled:!e.user.phone.editable,value:e.user.phone.value,onInput:a[7]||(a[7]=a=>e.user.phone.value=a.target.value)},null,8,["disabled","value"]),(0,l.Wm)(c,{slot:"end",color:"danger",fill:"clear",onClick:a[8]||(a[8]=a=>e.edit("phone"))},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{name:"pencil"})])),_:1})])),_:1}),(0,l.Wm)(f,null,{default:(0,l.w5)((()=>[(0,l.Wm)(m,{position:"stacked"},{default:(0,l.w5)((()=>[(0,l.Uk)("Adresse")])),_:1}),(0,l.Wm)(v,{disabled:!e.user.address.editable,value:e.user.address.value,onInput:a[9]||(a[9]=a=>e.user.address.value=a.target.value)},null,8,["disabled","value"]),(0,l.Wm)(c,{slot:"end",color:"danger",fill:"clear",onClick:a[10]||(a[10]=a=>e.edit("address"))},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{name:"pencil"})])),_:1})])),_:1})])),_:1}),(0,l.Wm)(c,{expand:"block",color:"danger",onClick:e.save},{default:(0,l.w5)((()=>[(0,l.Uk)("Profil speichern")])),_:1},8,["onClick"])])),_:1}),(0,l.Wm)(r,{size:"1"})])),_:1})])),_:1})])),_:1})])),_:1})}var s=t(5759),i=t(8945),r=t(129),u=t.n(r),d=(t(8862),t(3948),t(2262)),m=t(6826),p=t(4406),c=t(8602);function f(){const e="photos",a=(0,d.iH)([]),t=()=>{c.K.set({key:e,value:JSON.stringify(a.value)})};(0,l.YP)(a,t);const o=async()=>{const t=await c.K.get({key:e}),l=t.value?JSON.parse(t.value):[];for(const e of l){const a=await p.fy.readFile({path:e.filepath,directory:p.tP.Data});e.webviewPath=`data:image/jpeg;base64,${a.data}`}a.value=l};(0,l.bv)(o);const n=async()=>{const e=await m.V1.getPhoto({resultType:m.dk.Uri,source:m.oK.Camera,quality:10}),t=(new Date).getTime()+".jpeg",l=await r(e,t);a.value=[l,...a.value]},s=e=>new Promise(((a,t)=>{const l=new FileReader;l.onerror=t,l.onload=()=>{a(l.result)},l.readAsDataURL(e)})),r=async(e,a)=>{const t=await fetch(e.webPath),l=await t.blob(),o=await s(l);await p.fy.writeFile({path:a,data:o,directory:p.tP.Data});console.log(o);const n=new FormData;return n.append("name",a),n.append("data",o),n.append("updateProfileImage","updateProfileImage"),i.Z.post("https://alex.polan.sk/control-center/user.php",n,{headers:{"Content-Type":"multipart/form-data"}}),{filepath:a,webviewPath:e.webPath}};return{photos:a,takePhoto:n}}var v=t(8331);const w=(0,l.aZ)({name:"PersonalInformation",components:{IonPage:s._i,IonContent:s.W2,IonList:s.q_,IonItem:s.Ie,IonLabel:s.Q$,IonInput:s.pK,IonButton:s.YG,IonIcon:s.gu,IonTextarea:s.g2,IonAvatar:s.BJ},data(){return{user:{firstName:{value:"",editable:!0},lastName:{value:"",editable:!0},email:{value:"",editable:!1},phone:{value:"",editable:!1},address:{value:"",editable:!0}}}},methods:{edit(e){this.user[e].editable=!0},save(){const e={};for(const a in this.user)Object.prototype.propertyIsEnumerable.call(this.user,a)&&"id"!==a&&"editable"!==a&&(e[a]=this.user[a]["value"]);e["editData"]="editData",i.Z.post("https://alex.polan.sk/control-center/user.php?"+u().stringify(e),{headers:{"Content-Type":"application/json"}}).then((e=>{console.log(e),console.log("API response:",e.data)})).catch((e=>{console.error("API error:",e)}));for(const a in this.user)Object.prototype.propertyIsEnumerable.call(this.user,a)&&(this.user[a].editable=!1)}},async mounted(){const e=await(0,v.i)();console.log(e),this.user.email.value=e.email,this.user.firstName.value=e.firstName,this.user.lastName.value=e.lastName,this.user.profileImg=e.profileImg},setup(){const{takePhoto:e,photos:a}=f();return{takePhoto:e,photos:a}}});var h=t(3744);const b=(0,h.Z)(w,[["render",n],["__scopeId","data-v-069304d1"]]),g=b}}]);
//# sourceMappingURL=239.73ac01cd.js.map